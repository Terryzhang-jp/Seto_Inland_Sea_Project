# ç€¬æˆ·å†…æµ·èˆ¹ç­æŸ¥è¯¢API

ä¸€ä¸ªåŸºäºFastAPIçš„ç€¬æˆ·å†…æµ·èˆ¹ç­æ—¶åˆ»è¡¨æŸ¥è¯¢åç«¯ç³»ç»Ÿï¼Œæä¾›å®Œæ•´çš„å²›å±¿è·³å²›èˆªçº¿ä¿¡æ¯ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- **èˆªçº¿æœç´¢** - æ”¯æŒå¤šæ¡ä»¶ç»„åˆæœç´¢ï¼ˆå‡ºå‘åœ°ã€åˆ°è¾¾åœ°ã€æ—¶é—´ã€å…¬å¸ç­‰ï¼‰
- **æ¸¯å£ä¿¡æ¯** - è·å–ç€¬æˆ·å†…æµ·æ‰€æœ‰æ¸¯å£è¯¦æƒ…å’Œè¿æ¥ä¿¡æ¯
- **å…¬å¸ä¿¡æ¯** - èˆ¹è¿å…¬å¸è¯¦æƒ…å’Œè”ç³»æ–¹å¼
- **çƒ­é—¨è·¯çº¿** - æ¨èå¸¸ç”¨è·³å²›è·¯çº¿
- **å®æ—¶æ•°æ®** - åŸºäºæœ€æ–°çš„èˆ¹ç­æ—¶åˆ»è¡¨æ•°æ®
- **RESTful API** - æ ‡å‡†åŒ–çš„APIæ¥å£
- **è‡ªåŠ¨æ–‡æ¡£** - è‡ªåŠ¨ç”Ÿæˆçš„APIæ–‡æ¡£
- **CORSæ”¯æŒ** - ä¸ºå‰ç«¯åº”ç”¨åšå¥½å‡†å¤‡

## ğŸ“Š æ•°æ®è¦†ç›–

- **244æ¡èˆªçº¿** - è¦†ç›–ç€¬æˆ·å†…æµ·ä¸»è¦å²›å±¿é—´çš„æ‰€æœ‰èˆªçº¿
- **7å®¶èˆ¹è¿å…¬å¸** - åŒ…æ‹¬å››å›½æ±½èˆ¹ã€ã‚¸ãƒ£ãƒ³ãƒœãƒ•ã‚§ãƒªãƒ¼ç­‰ä¸»è¦è¿è¥å•†
- **14ä¸ªæ¸¯å£** - è¦†ç›–ç›´å³¶ã€è±Šå³¶ã€å°è±†å³¶ã€çŠ¬å³¶ã€å¥³æœ¨å³¶ã€ç”·æœ¨å³¶ç­‰
- **å®Œæ•´è·³å²›è·¯çº¿** - æ”¯æŒé«˜æ¾â‡”ç›´å³¶â‡”è±Šå³¶â‡”å°è±†å³¶ç­‰æ‰€æœ‰è·³å²›ç»„åˆ

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **FastAPI** - ç°ä»£Python Webæ¡†æ¶
- **Pydantic** - æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–
- **pandas** - é«˜æ•ˆCSVæ•°æ®å¤„ç†
- **uvicorn** - ASGIæœåŠ¡å™¨

## ğŸ“¦ å®‰è£…å’Œè¿è¡Œ

### 1. å…‹éš†é¡¹ç›®
```bash
cd ferry_api
```

### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
```bash
python -m venv ferry_env
source ferry_env/bin/activate  # Linux/Mac
# æˆ–
ferry_env\Scripts\activate     # Windows
```

### 3. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### 4. å¯åŠ¨æœåŠ¡å™¨
```bash
python run.py
```

æœåŠ¡å™¨å°†åœ¨ http://localhost:8000 å¯åŠ¨

## ğŸ“š APIæ–‡æ¡£

å¯åŠ¨æœåŠ¡å™¨åï¼Œè®¿é—®ä»¥ä¸‹åœ°å€æŸ¥çœ‹APIæ–‡æ¡£ï¼š

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

## ğŸ”— APIç«¯ç‚¹

### èˆªçº¿ç›¸å…³
- `GET /api/v1/routes` - æœç´¢èˆªçº¿
- `GET /api/v1/routes/popular` - è·å–çƒ­é—¨è·¯çº¿

### æ¸¯å£ç›¸å…³
- `GET /api/v1/ports` - è·å–æ‰€æœ‰æ¸¯å£
- `GET /api/v1/ports/{port_name}` - è·å–ç‰¹å®šæ¸¯å£ä¿¡æ¯

### å…¬å¸ç›¸å…³
- `GET /api/v1/companies` - è·å–æ‰€æœ‰èˆ¹è¿å…¬å¸
- `GET /api/v1/companies/{company_name}` - è·å–ç‰¹å®šå…¬å¸ä¿¡æ¯

### ç³»ç»Ÿç›¸å…³
- `GET /` - APIæ ¹è·¯å¾„
- `GET /health` - å¥åº·æ£€æŸ¥

## ğŸ” ä½¿ç”¨ç¤ºä¾‹

### æœç´¢èˆªçº¿
```bash
# æœç´¢é«˜æ¾åˆ°ç›´å³¶çš„èˆªçº¿
curl "http://localhost:8000/api/v1/routes?departure=é«˜æ¾&arrival=ç›´å³¶"

# æœç´¢å…è®¸è½¦è¾†çš„èˆªçº¿
curl "http://localhost:8000/api/v1/routes?allows_vehicles=true"

# æœç´¢ç‰¹å®šæ—¶é—´æ®µçš„èˆªçº¿
curl "http://localhost:8000/api/v1/routes?departure_time_start=08:00&departure_time_end=10:00"
```

### è·å–æ¸¯å£ä¿¡æ¯
```bash
# è·å–æ‰€æœ‰æ¸¯å£
curl "http://localhost:8000/api/v1/ports"

# æœç´¢æ¸¯å£
curl "http://localhost:8000/api/v1/ports?search=ç›´å³¶"
```

### è·å–å…¬å¸ä¿¡æ¯
```bash
# è·å–æ‰€æœ‰å…¬å¸
curl "http://localhost:8000/api/v1/companies"

# æœç´¢å…¬å¸
curl "http://localhost:8000/api/v1/companies?search=å››å›½æ±½èˆ¹"
```

## ğŸ“‹ æŸ¥è¯¢å‚æ•°

### èˆªçº¿æœç´¢å‚æ•°
- `departure` - å‡ºå‘åœ°ï¼ˆæ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼‰
- `arrival` - åˆ°è¾¾åœ°ï¼ˆæ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼‰
- `company` - è¿è¥å…¬å¸ï¼ˆæ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼‰
- `departure_time_start` - å‡ºå‘æ—¶é—´å¼€å§‹ (HH:MM)
- `departure_time_end` - å‡ºå‘æ—¶é—´ç»“æŸ (HH:MM)
- `allows_vehicles` - æ˜¯å¦å…è®¸è½¦è¾† (true/false)
- `allows_bicycles` - æ˜¯å¦å…è®¸è‡ªè¡Œè½¦ (true/false)
- `page` - é¡µç  (é»˜è®¤: 1)
- `limit` - æ¯é¡µæ•°é‡ (é»˜è®¤: 20, æœ€å¤§: 100)

## ğŸŒŸ å“åº”æ ¼å¼

æ‰€æœ‰APIå“åº”éƒ½éµå¾ªç»Ÿä¸€æ ¼å¼ï¼š

```json
{
  "success": true,
  "data": [...],
  "message": "Success",
  "total": 100,
  "page": 1,
  "limit": 20
}
```

## ğŸ§ª æµ‹è¯•

è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š

```bash
# æµ‹è¯•æ•°æ®åŠ è½½
python test_data_loading.py

# æµ‹è¯•åŸºæœ¬APIåŠŸèƒ½
python test_api.py

# æµ‹è¯•é«˜çº§APIåŠŸèƒ½
python test_advanced_api.py
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
ferry_api/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ models/          # Pydanticæ¨¡å‹
â”‚   â”œâ”€â”€ services/        # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ routers/         # APIè·¯ç”±
â”‚   â”œâ”€â”€ core/            # æ ¸å¿ƒé…ç½®
â”‚   â””â”€â”€ main.py          # FastAPIåº”ç”¨å…¥å£
â”œâ”€â”€ data/                # CSVæ•°æ®æ–‡ä»¶
â”œâ”€â”€ ferry_env/           # è™šæ‹Ÿç¯å¢ƒ
â”œâ”€â”€ requirements.txt     # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ run.py              # å¯åŠ¨è„šæœ¬
â””â”€â”€ README.md           # é¡¹ç›®æ–‡æ¡£
```

## ğŸ”§ å¼€å‘

### æ·»åŠ æ–°åŠŸèƒ½
1. åœ¨ `app/models/` ä¸­å®šä¹‰æ•°æ®æ¨¡å‹
2. åœ¨ `app/services/` ä¸­å®ç°ä¸šåŠ¡é€»è¾‘
3. åœ¨ `app/routers/` ä¸­æ·»åŠ APIè·¯ç”±
4. åœ¨ `app/main.py` ä¸­æ³¨å†Œè·¯ç”±

### æ•°æ®æ›´æ–°
æ›´æ–° `data/` ç›®å½•ä¸‹çš„CSVæ–‡ä»¶ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨é‡æ–°åŠ è½½æ•°æ®ã€‚

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿã€‚

---

**ç€¬æˆ·å†…æµ·èˆ¹ç­æŸ¥è¯¢API v1.0.0**  
*è®©å²›å±¿è·³å²›æ—…è¡Œå˜å¾—ç®€å•*
